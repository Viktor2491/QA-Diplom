# План автоматизации тестирования сервиса покупки тура

Тестируемая форма для покупки тура находится на странице сервиса https://github.com/netology-code/qa-diploma/blob/master/aqa-shop.jar, покупку можно совершить двумя способами:
1. Обычная оплата по дебетовой карте
1. Уникальная технология: выдача кредита по данным банковской карт

# Тестовые сценарии:

# Позитивные:
Валидными данными при заполнении полей ввода следует считать:
1. Номер карты: цифровые символы, 16 шт., в формате **** **** **** ****
1. Месяц: 01-12, но не ранее текущего месяца в случае, если указан текущий год
1. Год: последние две цифры порядкового номера года, не ранее текущего года, не более 5ти лет от текущего года
1. Владелец: буквенные символы латинского алфавита
1. CVC: цифровые символы, 3 шт.
 
Карты, представленные для тестирования (файл data.json):
* 4444 4444 4444 4441, status APPROVED
* 4444 4444 4444 4442, status DECLINED

Тестируемые Базы данных:
* MySql
* PostgreSQL

1. Оплата по карте со статусом APPROVED
Номер карты 4444 4444 4444 4441, остальные поля заполнены корректными значениями
Ожидаемый результат: появилось всплывающее окно "Операция одобрена Банком", в БД в payment_entity появилась запись со статусом APPROVED

1. Кредит по данным карты со статусом APPROVED
Номер карты 4444 4444 4444 4441, остальные поля заполнены корректными значениями
Ожидаемый результат: появилось всплывающее окно "Операция одобрена Банком", в БД в credit_request_entity появилась запись со статусом APPROVED

1. Оплата по карте со статусом DECLINED
Номер карты 4444 4444 4444 4442, остальные поля заполнены корректными значениями
Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity появилась запись со статусом DECLINED

1. Кредит по данным карты со статусом DECLINED
Номер карты 4444 4444 4444 4442, остальные поля заполнены корректными значениями
Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity появилась запись со статусом DECLINED

# Негативные:

1. Оплата по несуществующей карте
Номер карты 4444 4444 4444 4443, остальные поля заполнены корректными значениями
Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity новая запись не появилась

1. Кредит по данным несуществующей карты
Номер карты 4444 4444 4444 4443, остальные поля заполнены корректными значениями
Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity новая запись не появилась

1. Оплата по карте, указан невалидный номер
Номер карты 4444 4444 4444 444, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Номер карты появилось сообщение об ошибке "Неверный формат", в БД в payment_entity новая запись не появилась

1. Кредит по данным карты, указан невалидный номер
Номер карты 4444 4444 4444 444, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Номер карты появилось сообщение об ошибке "Неверный формат", в БД в credit_request_entity новая запись не появилась

1. Оплата по карте с истекшим сроком действия (месяц)
Номер карты 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась

1. Кредит по данным карты с истекшим сроком действия (месяц)
Номер карты 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась

1. Оплата по данным карты, указан невалидный месяц
Номер карты 4444 4444 4444 4441, в поле Месяц указать 00, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась

1. Кредит по данным карты, указан невалидный месяц
Номер карты 4444 4444 4444 4441, в поле Месяц указать 00, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Месяц появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась

1. Оплата по карте с истекшим сроком действия (год)
Номер карты 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Год появилось сообщение об ошибке "Истёк срок действия карты", в БД в payment_entity новая запись не появилась

1. Кредит по данным карты с истекшим сроком действия (год)
Номер карты 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Год появилось сообщение об ошибке "Истёк срок действия карты", в БД в credit_request_entity новая запись не появилась

1. Оплата по данным карты, указан невалидный год
Номер карты 4444 4444 4444 4441, в поле Год указать "последние две цифры текущего года + 6", остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Год появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в payment_entity новая запись не появилась

1. Кредит по данным карты, указан невалидный год
Номер карты 4444 4444 4444 4441, в поле Год указать "последние две цифры текущего года + 6", остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Год появилось сообщение об ошибке "Неверно указан срок действия карты", в БД в credit_request_entity новая запись не появилась

1. Оплата по данным карты, указано некорректное значение в поле Владелец
Номер карты 4444 4444 4444 4441, в поле Владелец указать некорректные данные, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Владелец появилось сообщение об ошибке, в БД в payment_entity новая запись не появилась

1. Кредит по данным карты, указано некорректное значение в поле Владелец
Номер карты 4444 4444 4444 4441, в поле Владелец указать некорректные данные, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем Владелец появилось сообщение об ошибке, в БД в credit_request_entity новая запись не появилась

1. Оплата по данным карты, указано некорректное значение в поле CVC/CVV
Номер карты 4444 4444 4444 4441, в поле CVC/CVV указать 0, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем CVC/CVV появилось сообщение об ошибке "Неверный формат", в БД в payment_entity новая запись не появилась

1. Кредит по данным карты, указано некорректное значение в поле CVC/CVV
Номер карты 4444 4444 4444 4441, в поле CVC/CVV указать 0, остальные поля заполнены корректными значениями
Ожидаемый результат: под полем CVC/CVV появилось сообщение об ошибке "Неверный формат", в БД в credit_request_entity новая запись не появилась

# Перечень используемых инструментов:

1. IntelliJ IDEA 2021.1.3 - функциональная среда разработки, подходящая для многих языков программирования;
1. Java 11 - объектно-ориентированный язык программирования, оптимальный для написания понятных и наглядных автотестов;
1. Gradle - мощная и простая система автоматической сборки проектов;
1. Selenide - изящный API, простота использования;
1. JUnit 5 - среда модульного тестирования для языка программирования Java;
1. Lombok - плагин для автоматической генерации кода, позволяет сократить количество кода;
1. Git - система контроля версий, позволяет фиксировать изменения в коде, быстро "откатить" изменения назад, сохранять предыдущие версии
1. DBUtils - библиотека, которая значительно упрощает работу с JDBC;
1. REST Assured — для тестирования API сервиса, встраивается в тесты на Java;
1. Docker — ПО для автоматизации развёртывания и управления приложением в средах с поддержкой контейнеризации;
1. Allure - фреймворк, предназначенный для создания отчетов, более наглядных, чем у Gradle

# Перечень и описание возможных рисков при автоматизации:

1. Отсутствие технической документации.
1. Возможное изменение верстки (поведения) и селекторов страницы.
1. Возможные проблемы при соединении к тестовому стенду.
1. Временные затраты на настройку Docker и CI.
1. Неверный выбор инструментов для тестирования. Зависимость от таких инструментов.
1. Трудности с подключением к тестовому стенду.
1. Поиск локаторов (селекторов) тестовой страницы.
1. Тесты могут не покрывать всех возможных негативных сценариев - всегда есть возможность, что пользователь поведет себя так, как мы не можем предвидеть. Эти риски придется закрывать уже не этапе продакшна.

# Интервальная оценка с учётом рисков (в часах):

Настройка тестового окружения - 8
Написание и отладка автотестов - 40
Прогон тестов и заведение issue - 8
Устранение замечаний - 16
Подготовка отчета по итогам автоматизированного тестирования - 8
Подготовка отчета по итогам автоматизации - 8
Итого с учетом рисков: 110 часов

# План сдачи работ
Авто-тесты: 08.11.2022.
Результаты прогона авто-тестов: 09.11.2022.
Отчет по автоматизации: 10.11.2022.
